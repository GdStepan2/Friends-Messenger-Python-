Friends Messenger (Python) — README

[RU]


Что это?:
-
Небольшой мессенджер “теста” на Python.

Функции:
-
один общий чат (без комнат)

вход по логину/паролю (Необходимо создавать самостоятельно!)

админ-приложение для создания аккаунтов

стикеры

список “кто в сети”


Структура проекта:
-
server.py — сервер WebSocket

db.py — база данных SQLite + логика пользователей/сообщений

ws_worker.py — сетевой воркер для клиентов (PySide6 + websockets)

client_app.py — клиентский мессенджер

admin_app.py — админ-панель (создание аккаунтов)

Требования:
-
Windows 10/11
Python 3.10+ (Работает и на 3.14)

Интернет/локальная сеть для друзей (если они на другом ПК)

Установка зависимостей:
-
pip install -U websockets sqlalchemy PySide6

Быстрый запуск (на одном компьютере)
-
**1) Запуск сервера**
-Откройте консоль в папке проекта и выполните:

**py server.py**

**При первом запуске сервер создаст базу messenger.db и предложит создать админа admin (введите пароль).**

Должно появиться:
**Server listening on ws://0.0.0.0:8765**

**2) Создание аккаунтов друзей**

Запустите админку:
**py admin_app.py**

Подключитесь к серверу:

**Host: 127.0.0.1**

**Port: 8765**

**Login: admin**

**Password: пароль, который вы задали при первом запуске сервера**


Создайте аккаунт другу (логин/пароль).
3) Запуск клиента
Запустите клиент:
**py client_app.py** *(Или exe файл, который вы можете собрать)*

**Введите:**

**Host: 127.0.0.1**

**Port: 8765**

**Логин/пароль пользователя**

Запуск в локальной сети (LAN) для друзей

Если сервер у вас на одном ПК, а друзья подключаются со своих ПК в той же Wi-Fi сети:
Узнайте IPv4 сервера:
ipconfig
Например: 192.168.1.10

**Друзья в клиенте указывают:**

**Host: 192.168.1.10**

**Port: 8765**

Откройте порт в Windows Firewall (на ПК-сервере, CMD от администратора):
**netsh advfirewall firewall add rule name="Messenger Server 8765" dir=in action=allow protocol=TCP localport=8765**

**Доступ через интернет (не только локалка)**
**Варианты:**

VPN для друзей (самый простой/безопасный): Tailscale или ZeroTier

Тогда друзья подключаются по VPN-IP как будто в одной локалке.


Port forwarding на роутере: внешний порт → ваш ПК:8765

**Минус:** сервер станет доступен из интернета. Рекомендуется использовать VPN или хотя бы ограничивать доступ.

Как пользоваться в клиенте
-
Отправка текста: введите текст → Enter / Send

Стикеры: кнопка Stickers

Ответить/копировать: ПКМ по сообщению

Уведомления: галочки Message notifications и Online alerts

Кто онлайн: кнопка Who is online
Новые сообщения подсвечиваются жёлтым, пока вы не начнёте печатать

Частые проблемы и решения
-

**“Connection refused / WinError 1225”**
Сервер не запущен или порт закрыт firewall’ом
Проверьте, что сервер пишет Server listening on ws://0.0.0.0:8765
Откройте порт в firewall (см. команду выше)

**Нельзя подключиться по 0.0.0.0**
0.0.0.0 — только для сервера (слушать на всех интерфейсах).

Для клиента:

на том же ПК: 127.0.0.1

по локалке: 192.168.x.x

*(ЕСЛИ ВЫ ИСПОЛЬЗУЕТЕ RADMIN ИЛИ ХАМАЧИ, ТО БЕРИТЕ IP С НИХ!)*


**Логин Admin не работает**
Логины чувствительны к регистру. Админ создаётся как admin (нижний регистр).

Prompt для ChatGPT
-

**Скопируйте и вставьте этот текст в ChatGPT вместе с вашими логами/скриншотами:**

**(ЗАПОЛНИТЕ ПРОПУСКИ!!!)**

PROMPT START

Ты — технический помощник по проекту “Friends Messenger (Python)”.
Проект состоит из файлов: server.py, db.py, ws_worker.py, client_app.py, admin_app.py.
Он использует: websockets (сервер/клиент), SQLAlchemy (SQLite), PySide6 (GUI).
Моя цель: запустить сервер и клиенты (локально/по сети), создать аккаунты через админку, и чтобы работали:
один общий чат (без комнат)
логин/пароль
стикеры
ответы на сообщения через ПКМ
уведомления о новых сообщениях и о пользователях онлайн
подсветка новых сообщений
список пользователей онлайн
Сначала:
Определи, в каком месте проблема (сервер/клиент/админка/сеть/зависимости).
Дай конкретные шаги “что сделать”, включая точные правки кода (если нужно) и команды в консоли.
Если проблема связана с сетью — дай команды проверки (ipconfig, ping, netstat) и настройку firewall.
Вот мои данные (заполни/прочитай):
ОС: Windows (10/11)
Python: (версия)
Команда запуска сервера: (что я ввожу)
Что вижу в консоли сервера (лог): (вставлю ниже)
Ошибка клиента/админки: (вставлю ниже)
Сервер и клиент на одном ПК? (да/нет)
Если нет: IP сервера: (…)
Порт: 8765
ЛОГИ/ОШИБКИ:
<вставь сюда свои логи/трейсбеки/скриншоты>

**PROMPT END**
